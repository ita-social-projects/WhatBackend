USE `Soft`;

LOCK TABLES `Soft`.`Marks` WRITE;

INSERT INTO `Soft`.`Marks`
(`Value`, `Comment`, `EvaluationDate`, `Type`, `EvaluatedBy`)
VALUES
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 24),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 26),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 6),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(4, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(5, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 7),
(2, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27),
(3, 'Comment about mark text placeholder', '2021-11-01 12:00:00', '0', 27)
;

UNLOCK TABLES;

DROP TABLE IF EXISTS `Soft`.`TempHomeworks`;

CREATE TEMPORARY TABLE `Soft`.`TempHomeworks` (
	`ID`				BIGINT UNSIGNED    NOT NULL         AUTO_INCREMENT,
    `PublishingDate`    DATETIME           NOT NUll,
	`CreatedBy`	        BIGINT UNSIGNED    NOT NULL,
    
    CONSTRAINT    `PK_THomework`    PRIMARY KEY (`ID`)
);

INSERT INTO `Soft`.`TempHomeworks`
(`PublishingDate`, `CreatedBy`)
VALUES
('2021-06-30 10:00:00', 24),
('2021-07-27 10:00:00', 24),
('2021-08-24 10:00:00', 24),
('2021-06-30 12:00:00', 26),
('2021-07-21 12:00:00', 6),
('2021-08-25 12:00:00', 26),
('2021-06-24 12:00:00', 6),
('2021-06-22 12:00:00', 6),
('2021-07-12 12:00:00', 26),
('2021-08-16 12:00:00', 6),
('2021-07-01 12:00:00', 27),
('2021-08-05 12:00:00', 7),
('2021-09-10 12:00:00', 27),
('2021-06-25 12:00:00', 7),
('2021-06-23 12:00:00', 7),
('2021-07-27 12:00:00', 27),
('2021-09-01 12:00:00', 27),
('2021-07-02 10:00:00', 28),
('2021-07-30 10:00:00', 28),
('2021-08-27 10:00:00', 28),
('2021-06-26 10:00:00', 8),
('2021-06-19 10:00:00', 28),
('2021-07-07 10:00:00', 8),
('2021-08-11 10:00:00', 28)
;

UPDATE `Soft`.`Homeworks` AS H
	INNER JOIN `Soft`.`TempHomeworks` AS T
	ON H.`ID` = T.`ID`
	SET H.`PublishingDate` = T.`PublishingDate`,
		H.`CreatedBy` = T.`CreatedBy`
	WHERE H.`ID` = T.`ID`;

ALTER TABLE `Homeworks`  
    ADD CONSTRAINT    `FK_AccountOfHomework`    FOREIGN KEY (`CreatedBy`)    REFERENCES `Accounts` (`ID`);

DROP TABLE IF EXISTS `Soft`.`TempHomeworksFromStudents`;

CREATE TEMPORARY TABLE `Soft`.`TempHomeworksFromStudents` (
	`ID`				BIGINT UNSIGNED    NOT NULL         AUTO_INCREMENT,
	`MarkID` 	        BIGINT UNSIGNED    DEFAULT NULL,
    `PublishingDate`    DATETIME           NOT NUll,
	`IsSent`	        BOOLEAN 	       NOT NULL,
    
    CONSTRAINT    `PK_THomeworksFromStudents`    PRIMARY KEY (`ID`)
);

INSERT INTO `Soft`.`TempHomeworksFromStudents`
(`MarkID`, `PublishingDate`, `IsSent`)
VALUES
(1, '2021-07-29 10:00:00', 1),
(2, '2021-08-26 10:00:00', 1),
(3, '2021-09-23 10:00:00', 1),
(4, '2021-07-29 10:00:00', 1),
(5, '2021-08-26 10:00:00', 1),
(6, '2021-09-23 10:00:00', 1),
(7, '2021-07-29 10:00:00', 1),
(8, '2021-08-26 10:00:00', 1),
(9, '2021-09-23 10:00:00', 1),
(10, '2021-07-29 10:00:00', 1),
(11, '2021-08-26 10:00:00', 1),
(12, '2021-09-23 10:00:00', 1),
(13, '2021-07-29 10:00:00', 1),
(14, '2021-08-26 10:00:00', 1),
(15, '2021-09-23 10:00:00', 1),
(16, '2021-07-29 10:00:00', 1),
(17, '2021-08-26 10:00:00', 1),
(18, '2021-09-23 10:00:00', 1),
(19, '2021-07-30 10:00:00', 1),
(20, '2021-08-20 10:00:00', 1),
(21, '2021-09-24 10:00:00', 1),
(22, '2021-07-23 10:00:00', 1),
(23, '2021-07-21 10:00:00', 1),
(24, '2021-08-11 10:00:00', 1),
(25, '2021-09-15 10:00:00', 1),
(26, '2021-07-30 10:00:00', 1),
(27, '2021-08-20 10:00:00', 1),
(28, '2021-09-24 10:00:00', 1),
(29, '2021-07-23 10:00:00', 1),
(30, '2021-07-21 10:00:00', 1),
(31, '2021-08-11 10:00:00', 1),
(32, '2021-09-15 10:00:00', 1),
(33, '2021-07-30 10:00:00', 1),
(34, '2021-08-20 10:00:00', 1),
(35, '2021-09-24 10:00:00', 1),
(36, '2021-07-23 10:00:00', 1),
(37, '2021-07-21 10:00:00', 1),
(38, '2021-08-11 10:00:00', 1),
(39, '2021-09-15 10:00:00', 1),
(40, '2021-07-30 10:00:00', 1),
(41, '2021-08-20 10:00:00', 1),
(42, '2021-09-24 10:00:00', 1),
(43, '2021-07-23 10:00:00', 1),
(44, '2021-07-21 10:00:00', 1),
(45, '2021-08-11 10:00:00', 1),
(46, '2021-09-15 10:00:00', 1),
(47, '2021-07-30 10:00:00', 1),
(48, '2021-08-20 10:00:00', 1),
(49, '2021-09-24 10:00:00', 1),
(50, '2021-07-23 10:00:00', 1),
(51, '2021-07-21 10:00:00', 1),
(52, '2021-08-11 10:00:00', 1),
(53, '2021-09-15 10:00:00', 1),
(54, '2021-07-30 10:00:00', 1),
(55, '2021-08-20 10:00:00', 1),
(56, '2021-09-24 10:00:00', 1),
(57, '2021-07-23 10:00:00', 1),
(58, '2021-07-21 10:00:00', 1),
(59, '2021-08-11 10:00:00', 1),
(60, '2021-09-15 10:00:00', 1),
(61, '2021-07-30 10:00:00', 1),
(62, '2021-08-20 10:00:00', 1),
(63, '2021-09-24 10:00:00', 1),
(64, '2021-07-23 10:00:00', 1),
(65, '2021-07-21 10:00:00', 1),
(66, '2021-08-11 10:00:00', 1),
(67, '2021-09-15 10:00:00', 1),
(68, '2021-07-30 10:00:00', 1),
(69, '2021-08-20 10:00:00', 1),
(70, '2021-09-24 10:00:00', 1),
(71, '2021-07-23 10:00:00', 1),
(72, '2021-07-21 10:00:00', 1),
(73, '2021-08-11 10:00:00', 1),
(74, '2021-09-15 10:00:00', 1),
(75, '2021-07-29 10:00:00', 1),
(76, '2021-09-04 10:00:00', 1),
(77, '2021-10-09 10:00:00', 1),
(78, '2021-07-24 10:00:00', 1),
(79, '2021-07-22 10:00:00', 1),
(80, '2021-08-26 10:00:00', 1),
(81, '2021-09-29 10:00:00', 1),
(82, '2021-07-29 10:00:00', 1),
(83, '2021-09-04 10:00:00', 1),
(84, '2021-10-09 10:00:00', 1),
(85, '2021-07-24 10:00:00', 1),
(86, '2021-07-22 10:00:00', 1),
(87, '2021-08-26 10:00:00', 1),
(88, '2021-09-29 10:00:00', 1),
(89, '2021-07-29 10:00:00', 1),
(90, '2021-09-04 10:00:00', 1),
(91, '2021-10-09 10:00:00', 1),
(92, '2021-07-24 10:00:00', 1),
(93, '2021-07-22 10:00:00', 1),
(94, '2021-08-26 10:00:00', 1),
(95, '2021-09-29 10:00:00', 1),
(96, '2021-07-29 10:00:00', 1),
(97, '2021-09-04 10:00:00', 1),
(98, '2021-10-09 10:00:00', 1),
(99, '2021-07-24 10:00:00', 1),
(100, '2021-07-22 10:00:00', 1),
(101, '2021-08-26 10:00:00', 1),
(102, '2021-09-29 10:00:00', 1),
(null, '2021-07-29 10:00:00', 1),
(null, '2021-09-04 10:00:00', 1),
(null, '2021-10-09 10:00:00', 1),
(null, '2021-07-24 10:00:00', 1),
(null, '2021-07-22 10:00:00', 1),
(null, '2021-08-26 10:00:00', 1),
(null, '2021-09-29 10:00:00', 1),
(null, '2021-07-29 10:00:00', 1),
(null, '2021-09-04 10:00:00', 1),
(null, '2021-10-09 10:00:00', 1),
(null, '2021-07-24 10:00:00', 1),
(null, '2021-07-22 10:00:00', 1),
(null, '2021-08-26 10:00:00', 1),
(null, '2021-09-29 10:00:00', 1),
(null, '2021-07-29 10:00:00', 1),
(null, '2021-09-04 10:00:00', 1),
(null, '2021-10-09 10:00:00', 1),
(null, '2021-07-24 10:00:00', 1),
(null, '2021-07-22 10:00:00', 1),
(null, '2021-08-26 10:00:00', 1),
(null, '2021-09-29 10:00:00', 1),
(null, '2021-07-29 10:00:00', 1),
(null, '2021-09-04 10:00:00', 1),
(null, '2021-10-09 10:00:00', 1),
(null, '2021-07-24 10:00:00', 1),
(null, '2021-07-22 10:00:00', 1),
(null, '2021-08-26 10:00:00', 1),
(null, '2021-09-29 10:00:00', 1),
(null, '2021-08-01 10:00:00', 1),
(null, '2021-08-28 10:00:00', 1),
(null, '2021-09-25 10:00:00', 1),
(null, '2021-07-25 10:00:00', 1),
(null, '2021-07-17 10:00:00', 1),
(null, '2021-08-06 10:00:00', 1),
(null, '2021-09-10 10:00:00', 1),
(null, '2021-08-01 10:00:00', 1),
(null, '2021-08-28 10:00:00', 1),
(null, '2021-09-25 10:00:00', 1),
(null, '2021-07-25 10:00:00', 1),
(null, '2021-07-17 10:00:00', 1),
(null, '2021-08-06 10:00:00', 1),
(null, '2021-09-10 10:00:00', 1),
(null, '2021-08-01 10:00:00', 1),
(null, '2021-08-28 10:00:00', 1),
(null, '2021-09-25 10:00:00', 1),
(null, '2021-07-25 10:00:00', 1),
(null, '2021-07-17 10:00:00', 1),
(null, '2021-08-06 10:00:00', 1),
(null, '2021-09-10 10:00:00', 1),
(null, '2021-08-01 10:00:00', 1),
(null, '2021-08-28 10:00:00', 1),
(null, '2021-09-25 10:00:00', 1),
(null, '2021-07-25 10:00:00', 1),
(null, '2021-07-17 10:00:00', 1),
(null, '2021-08-06 10:00:00', 1),
(null, '2021-09-10 10:00:00', 1),
(null, '2021-08-01 10:00:00', 1),
(null, '2021-08-28 10:00:00', 1),
(null, '2021-09-25 10:00:00', 1),
(null, '2021-07-25 10:00:00', 1),
(null, '2021-07-17 10:00:00', 1),
(null, '2021-08-06 10:00:00', 1),
(null, '2021-09-10 10:00:00', 1),
(null, '2021-08-01 10:00:00', 1),
(null, '2021-08-28 10:00:00', 1),
(null, '2021-09-25 10:00:00', 1),
(null, '2021-07-25 10:00:00', 1),
(null, '2021-07-17 10:00:00', 1),
(null, '2021-08-06 10:00:00', 1),
(null, '2021-09-10 10:00:00', 1),
(null, '2021-08-01 10:00:00', 1),
(null, '2021-08-28 10:00:00', 1),
(null, '2021-09-25 10:00:00', 1),
(null, '2021-07-25 10:00:00', 1),
(null, '2021-07-17 10:00:00', 1),
(null, '2021-08-06 10:00:00', 1),
(null, '2021-09-10 10:00:00', 1),
(null, '2021-08-01 10:00:00', 1),
(null, '2021-08-28 10:00:00', 1),
(null, '2021-09-25 10:00:00', 1),
(null, '2021-07-25 10:00:00', 1),
(null, '2021-07-17 10:00:00', 1),
(null, '2021-08-06 10:00:00', 1),
(null, '2021-09-10 10:00:00', 1)
;

UPDATE `Soft`.`HomeworksFromStudents` AS H
	INNER JOIN    `Soft`.`TempHomeworksFromStudents` AS T
	ON H.`ID` = T.`ID`
	SET H.`MarkID` = T.`MarkID`,
		H.`PublishingDate` = T.`PublishingDate`,
		H.`IsSent` = T.`IsSent`
	WHERE H.`ID` = T.`ID`;

ALTER TABLE `HomeworksFromStudents` 
    MODIFY    `PublishingDate`    DATETIME           NOT NUll,
    MODIFY    `IsSent`	      	   BOOLEAN 	         NOT NULL;
  
ALTER TABLE `Homeworks`
    MODIFY    `PublishingDate`    DATETIME           NOT NULL,
    MODIFY    `CreatedBy`         BIGINT UNSIGNED    NOT NULL;